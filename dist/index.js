'use strict';const _0x41494f=_0x5e07;(function(_0x3f0fd3,_0x37cf21){const _0x2e4872=_0x5e07,_0x3a7715=_0x3f0fd3();while(!![]){try{const _0x3a2997=-parseInt(_0x2e4872(0x159))/0x1+-parseInt(_0x2e4872(0x16e))/0x2+-parseInt(_0x2e4872(0x165))/0x3+-parseInt(_0x2e4872(0x168))/0x4*(-parseInt(_0x2e4872(0x145))/0x5)+-parseInt(_0x2e4872(0x131))/0x6*(parseInt(_0x2e4872(0x14d))/0x7)+parseInt(_0x2e4872(0x163))/0x8+parseInt(_0x2e4872(0x16f))/0x9;if(_0x3a2997===_0x37cf21)break;else _0x3a7715['push'](_0x3a7715['shift']());}catch(_0x22e52b){_0x3a7715['push'](_0x3a7715['shift']());}}}(_0x2fd6,0x91ecd));function _0x5e07(_0x5b4894,_0x36c2f0){const _0x2fd6de=_0x2fd6();return _0x5e07=function(_0x5e0775,_0x240dd8){_0x5e0775=_0x5e0775-0x12c;let _0x300348=_0x2fd6de[_0x5e0775];return _0x300348;},_0x5e07(_0x5b4894,_0x36c2f0);}var __createBinding=this&&this[_0x41494f(0x17a)]||(Object['create']?function(_0x4e9d47,_0x7e7a76,_0x1617ce,_0x173055){const _0x5ca53c=_0x41494f;if(_0x173055===undefined)_0x173055=_0x1617ce;var _0x4685cd=Object[_0x5ca53c(0x141)](_0x7e7a76,_0x1617ce);(!_0x4685cd||(_0x5ca53c(0x132)in _0x4685cd?!_0x7e7a76[_0x5ca53c(0x17e)]:_0x4685cd['writable']||_0x4685cd[_0x5ca53c(0x12d)]))&&(_0x4685cd={'enumerable':!![],'get':function(){return _0x7e7a76[_0x1617ce];}}),Object[_0x5ca53c(0x15d)](_0x4e9d47,_0x173055,_0x4685cd);}:function(_0x1a29fd,_0x1cfdfc,_0x50d228,_0x3f1fcc){if(_0x3f1fcc===undefined)_0x3f1fcc=_0x50d228;_0x1a29fd[_0x3f1fcc]=_0x1cfdfc[_0x50d228];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[_0x41494f(0x14a)]?function(_0x2369ca,_0x4ba0b9){const _0x4c30fd=_0x41494f;Object[_0x4c30fd(0x15d)](_0x2369ca,'default',{'enumerable':!![],'value':_0x4ba0b9});}:function(_0x38754a,_0x25025b){_0x38754a['default']=_0x25025b;}),__importStar=this&&this[_0x41494f(0x177)]||function(_0x4a6f8b){const _0x30bf25=_0x41494f;if(_0x4a6f8b&&_0x4a6f8b['__esModule'])return _0x4a6f8b;var _0xbc2fb1={};if(_0x4a6f8b!=null){for(var _0x52e672 in _0x4a6f8b)if(_0x52e672!==_0x30bf25(0x178)&&Object[_0x30bf25(0x142)][_0x30bf25(0x17c)][_0x30bf25(0x12e)](_0x4a6f8b,_0x52e672))__createBinding(_0xbc2fb1,_0x4a6f8b,_0x52e672);}return __setModuleDefault(_0xbc2fb1,_0x4a6f8b),_0xbc2fb1;},__awaiter=this&&this['__awaiter']||function(_0x2a6a50,_0x249979,_0x2f63cb,_0x35ca3a){function _0xf7ca22(_0x28b339){return _0x28b339 instanceof _0x2f63cb?_0x28b339:new _0x2f63cb(function(_0x168a8a){_0x168a8a(_0x28b339);});}return new(_0x2f63cb||(_0x2f63cb=Promise))(function(_0x3e32cf,_0x382a3a){const _0x99be7a=_0x5e07;function _0x1921dc(_0x2a4a83){const _0x2e4d17=_0x5e07;try{_0x329b5f(_0x35ca3a[_0x2e4d17(0x15e)](_0x2a4a83));}catch(_0x4c982e){_0x382a3a(_0x4c982e);}}function _0xb0dcb2(_0x202ad8){const _0xcff0f5=_0x5e07;try{_0x329b5f(_0x35ca3a[_0xcff0f5(0x150)](_0x202ad8));}catch(_0x59b123){_0x382a3a(_0x59b123);}}function _0x329b5f(_0xe95e2){const _0x5abe05=_0x5e07;_0xe95e2[_0x5abe05(0x13f)]?_0x3e32cf(_0xe95e2[_0x5abe05(0x137)]):_0xf7ca22(_0xe95e2[_0x5abe05(0x137)])['then'](_0x1921dc,_0xb0dcb2);}_0x329b5f((_0x35ca3a=_0x35ca3a[_0x99be7a(0x175)](_0x2a6a50,_0x249979||[]))[_0x99be7a(0x15e)]());});},__importDefault=this&&this[_0x41494f(0x172)]||function(_0x37e6f8){const _0x4a8910=_0x41494f;return _0x37e6f8&&_0x37e6f8[_0x4a8910(0x17e)]?_0x37e6f8:{'default':_0x37e6f8};};Object[_0x41494f(0x15d)](exports,_0x41494f(0x17e),{'value':!![]});const express_1=__importStar(require('express')),body_parser_1=require(_0x41494f(0x16d)),api_router_1=require(_0x41494f(0x171)),db_1=__importDefault(require(_0x41494f(0x17d)));require(_0x41494f(0x152));const mqtt_1=__importDefault(require('./classes/mqtt')),connectMongoDBSession=__importStar(require('connect-mongodb-session')),constants_1=require(_0x41494f(0x15b)),express_session_1=__importDefault(require(_0x41494f(0x14e))),path=__importStar(require('path')),csurf_1=__importDefault(require(_0x41494f(0x160))),dashboard_route_1=require(_0x41494f(0x135));require(_0x41494f(0x174)),process[_0x41494f(0x17b)]['TZ']=_0x41494f(0x133);const app=(0x0,express_1[_0x41494f(0x178)])();app['use']((0x0,body_parser_1['json'])());const MongoDBStore=connectMongoDBSession[_0x41494f(0x178)](express_session_1[_0x41494f(0x178)]),sessionStore=MongoDBStore({'uri':constants_1[_0x41494f(0x134)],'collection':'sessions','expires':0x3e8*0x3c*0x3c*0x18*0x3});app[_0x41494f(0x130)]((0x0,express_session_1[_0x41494f(0x178)])({'name':constants_1[_0x41494f(0x13e)],'resave':!![],'saveUninitialized':!![],'secret':constants_1[_0x41494f(0x164)],'rolling':!![],'store':sessionStore,'cookie':{'maxAge':0x1b77400}})),app[_0x41494f(0x130)]((_0x8a2996,_0x3c5227,_0xb09e63)=>{return _0xb09e63();}),app['use']('/api',api_router_1[_0x41494f(0x16b)]),app['use'](_0x41494f(0x143),express_1['default'][_0x41494f(0x154)](path[_0x41494f(0x161)](__dirname,'/public'))),app[_0x41494f(0x12c)]('view\x20engine',_0x41494f(0x166)),app[_0x41494f(0x12c)]('views',path[_0x41494f(0x161)](__dirname,_0x41494f(0x138))),app['set'](_0x41494f(0x156),{'delimiter':'?'}),app['use']((0x0,express_1[_0x41494f(0x147)])({'extended':!![]})),app['use']((0x0,csurf_1[_0x41494f(0x178)])()),app['use'](function(_0x3882a4,_0x414002,_0x1af3a7,_0x5ed4a5){const _0x3f5165=_0x41494f;console[_0x3f5165(0x140)](_0x3f5165(0x157)),console['log'](_0x3882a4);if(_0x3882a4[_0x3f5165(0x146)]!==_0x3f5165(0x155))return _0x5ed4a5(_0x3882a4);return _0x1af3a7[_0x3f5165(0x148)](0x193)[_0x3f5165(0x149)]({'text':'error','status':![]});}),app['use']((_0x27ffa7,_0x22dc95,_0x330fbb)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x946f1=_0x41494f;try{_0x22dc95[_0x946f1(0x169)][_0x946f1(0x151)]=_0x27ffa7[_0x946f1(0x14b)][_0x946f1(0x15c)],_0x22dc95[_0x946f1(0x169)][_0x946f1(0x15a)]=_0x27ffa7[_0x946f1(0x15a)](),_0x22dc95[_0x946f1(0x169)][_0x946f1(0x158)]=[],_0x22dc95[_0x946f1(0x169)]['scripts']=[],_0x22dc95[_0x946f1(0x169)][_0x946f1(0x16a)]=_0x27ffa7[_0x946f1(0x16a)],_0x22dc95[_0x946f1(0x169)]['queries']=_0x27ffa7[_0x946f1(0x13d)],_0x330fbb();}catch(_0x2a6f8b){return console[_0x946f1(0x170)](_0x946f1(0x179)),console[_0x946f1(0x13b)](_0x2a6f8b),_0x22dc95[_0x946f1(0x149)]({'status':![],'text':_0x946f1(0x14f)});}})),app[_0x41494f(0x130)](_0x41494f(0x14c),dashboard_route_1[_0x41494f(0x15f)]),app[_0x41494f(0x130)](_0x41494f(0x12f),(_0xf3cfce,_0x46c3fd)=>{const _0x1d32e8=_0x41494f;return _0x46c3fd[_0x1d32e8(0x13a)](_0x1d32e8(0x162));}),app[_0x41494f(0x130)](_0x41494f(0x167),(_0x4bfdb4,_0x3bcd4a)=>{const _0x52a8ef=_0x41494f;return _0x3bcd4a[_0x52a8ef(0x13a)](_0x52a8ef(0x153));});function _0x2fd6(){const _0x43881d=['__esModule','set','configurable','call','/error/404','use','380814lorBdN','get','Asia/Tehran','mongoConnection','./routes/dashboard.route','then','value','views','listen','render','dir','mongo\x20database\x20connected','query','sessionName','done','log','getOwnPropertyDescriptor','prototype','/public','server\x20start\x20at\x20','31100BNmqDe','code','urlencoded','status','json','create','session','/dashboard','63TDuHEU','express-session','خطایی\x20پیش\x20آمده','throw','isAuthenticated','./types/global.type','error/403.ejs','static','EBADCSRFTOKEN','view\x20options','its\x20a\x20error\x20catrch\x20it','styles','1117821bzFThP','csrfToken','./utility/constants','isUserLoggedIn','defineProperty','next','dashboardRoute','csurf','join','error/404.ejs','2624112krzOeL','sessionSecret','2727129AphmqI','ejs','/error/403','96fBttSw','locals','hostname','apiRouter','connect','body-parser','2200584npskNR','34369128uTzAhk','error','./routes/api.router','__importDefault','PORT','./types/session','apply','getInstance','__importStar','default','error\x20in\x20locals','__createBinding','env','hasOwnProperty','./config/db'];_0x2fd6=function(){return _0x43881d;};return _0x2fd6();}const PORT=process['env'][_0x41494f(0x173)]||0x2260;(0x0,db_1[_0x41494f(0x178)])()[_0x41494f(0x136)](()=>{const _0x5c2816=_0x41494f;console[_0x5c2816(0x140)](_0x5c2816(0x13c)),mqtt_1['default'][_0x5c2816(0x176)]()[_0x5c2816(0x16c)](),app[_0x5c2816(0x139)](PORT,()=>console[_0x5c2816(0x140)](_0x5c2816(0x144)+PORT));});