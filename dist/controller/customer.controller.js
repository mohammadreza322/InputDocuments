'use strict';const _0x40c3b1=_0x16f1;function _0x16f1(_0x4ec681,_0x1b3842){const _0x48e806=_0x48e8();return _0x16f1=function(_0x16f115,_0x62c8fe){_0x16f115=_0x16f115-0xe4;let _0x1bc0ec=_0x48e806[_0x16f115];return _0x1bc0ec;},_0x16f1(_0x4ec681,_0x1b3842);}(function(_0x17bb19,_0x44b085){const _0x194e65=_0x16f1,_0x5b2621=_0x17bb19();while(!![]){try{const _0x255520=-parseInt(_0x194e65(0xfb))/0x1+-parseInt(_0x194e65(0x10b))/0x2*(parseInt(_0x194e65(0x10e))/0x3)+parseInt(_0x194e65(0xef))/0x4+parseInt(_0x194e65(0xf4))/0x5*(-parseInt(_0x194e65(0xe8))/0x6)+-parseInt(_0x194e65(0xea))/0x7+-parseInt(_0x194e65(0xf0))/0x8*(-parseInt(_0x194e65(0xeb))/0x9)+parseInt(_0x194e65(0xe7))/0xa;if(_0x255520===_0x44b085)break;else _0x5b2621['push'](_0x5b2621['shift']());}catch(_0x3650a6){_0x5b2621['push'](_0x5b2621['shift']());}}}(_0x48e8,0x8be04));var __awaiter=this&&this[_0x40c3b1(0xf9)]||function(_0x51daee,_0xf5138b,_0x31ac8c,_0x2c5bd8){function _0x812aab(_0x2b9e66){return _0x2b9e66 instanceof _0x31ac8c?_0x2b9e66:new _0x31ac8c(function(_0xf13ef6){_0xf13ef6(_0x2b9e66);});}return new(_0x31ac8c||(_0x31ac8c=Promise))(function(_0x29b964,_0x1bec75){const _0x17f097=_0x16f1;function _0x57c701(_0x33e3a3){const _0x3e8db6=_0x16f1;try{_0x4fa793(_0x2c5bd8[_0x3e8db6(0x112)](_0x33e3a3));}catch(_0x142e31){_0x1bec75(_0x142e31);}}function _0x54c11a(_0x2d4319){try{_0x4fa793(_0x2c5bd8['throw'](_0x2d4319));}catch(_0x486b8d){_0x1bec75(_0x486b8d);}}function _0x4fa793(_0xd97c75){const _0x1e6253=_0x16f1;_0xd97c75[_0x1e6253(0xed)]?_0x29b964(_0xd97c75['value']):_0x812aab(_0xd97c75[_0x1e6253(0xec)])['then'](_0x57c701,_0x54c11a);}_0x4fa793((_0x2c5bd8=_0x2c5bd8[_0x17f097(0x10d)](_0x51daee,_0xf5138b||[]))[_0x17f097(0x112)]());});},__importDefault=this&&this[_0x40c3b1(0x105)]||function(_0x2ee37d){const _0x39befa=_0x40c3b1;return _0x2ee37d&&_0x2ee37d[_0x39befa(0xe6)]?_0x2ee37d:{'default':_0x2ee37d};};function _0x48e8(){const _0x4974ec=['اطلاعات\x20کاربر\x20با\x20موفقیت\x20تغییر\x20کرد','ObjectId','deleteCustomer','شماره\x20تماس\x20را\x20وارد\x20کنید','inside\x20remove\x20user','setUserDetailsWithPhoneNUmber','../entities/user.entity','__importDefault','../entities/logs.entity','address','mongoose','user','body','1104274vnWRww','../entities/device.entity','apply','3llamBx','getUserInformation','trim','fullName','next','default','شماره\x20تماس\x20وارد\x20شده\x20مربوط\x20به\x20کاربر\x20دیگری\x20میباشد','__esModule','23885220SsVMWk','10962ffUCxb','editUser','3416315qVXppm','175023aSukak','value','done','removeAllUserTokens','45300OcBmPM','304jbqZYY','phoneNumber','نام\x20و\x20نام\x20خانوادگی\x20را\x20وارد\x20کنید','status','1390vmAwmY','removeCustomer','خطا\x20در\x20ورودی','خطایی\x20پیش\x20آمده','toString','__awaiter','json','1017813MtWSVc','error','Types'];_0x48e8=function(){return _0x4974ec;};return _0x48e8();}Object['defineProperty'](exports,_0x40c3b1(0xe6),{'value':!![]}),exports['editUser']=exports['deleteCustomer']=void 0x0;const token_entity_1=__importDefault(require('../entities/token.entity')),device_entity_1=__importDefault(require(_0x40c3b1(0x10c))),mongoose_1=require(_0x40c3b1(0x108)),user_entity_1=__importDefault(require(_0x40c3b1(0x104))),logs_entity_1=__importDefault(require(_0x40c3b1(0x106))),deleteCustomer=(_0x10614f,_0x54e82d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x48c828=_0x40c3b1;try{const {id:_0x40d1a3}=_0x10614f[_0x48c828(0x10a)];if(!_0x40d1a3)return _0x54e82d[_0x48c828(0xfa)]({'status':![],'message':_0x48c828(0xf6)});if(_0x40d1a3[_0x48c828(0xf8)]()[_0x48c828(0x110)]()=='')return _0x54e82d[_0x48c828(0xfa)]({'status':![],'message':'خطا\x20در\x20ورودی'});const _0x197f4e=new mongoose_1['Types'][(_0x48c828(0xff))](_0x40d1a3),_0x7c1cd1=yield user_entity_1[_0x48c828(0xe4)][_0x48c828(0x10f)](new mongoose_1[(_0x48c828(0xfd))][(_0x48c828(0xff))](_0x197f4e));if(!_0x7c1cd1)return _0x54e82d['json']({'status':![],'message':_0x48c828(0xf6)});return yield logs_entity_1[_0x48c828(0xe4)][_0x48c828(0xf5)](_0x7c1cd1[_0x48c828(0x111)],_0x10614f[_0x48c828(0x109)]['id']),yield token_entity_1[_0x48c828(0xe4)][_0x48c828(0xee)](_0x197f4e),yield device_entity_1['default']['removeAllDeviceOfUser'](_0x197f4e),yield user_entity_1['default']['removeUser'](_0x197f4e),_0x54e82d['json']({'status':!![],'message':'حذف\x20کاربر\x20با\x20موفقیت\x20انجام\x20شد'});}catch(_0x26f129){return console['error'](_0x48c828(0x102)),console[_0x48c828(0xfc)](_0x26f129),_0x54e82d[_0x48c828(0xf3)](0x1f4)['json']({'message':_0x48c828(0xf7)});}});exports[_0x40c3b1(0x100)]=deleteCustomer;const editUser=(_0x328659,_0x3f2df5)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5718d6=_0x40c3b1;try{const {id:_0x5f4b2f,fullName:_0xd44f9b,phoneNumber:_0x4f7e5d,address:_0x1b2034,birthday:_0x43c706}=_0x328659[_0x5718d6(0x10a)];if(!_0x5f4b2f||!_0xd44f9b||!_0x4f7e5d)return _0x3f2df5['json']({'status':![],'message':_0x5718d6(0xf6)});if(_0x5f4b2f[_0x5718d6(0xf8)]()[_0x5718d6(0x110)]()=='')return _0x3f2df5[_0x5718d6(0xfa)]({'status':![],'message':_0x5718d6(0xf6)});if(!(0x0,mongoose_1['isValidObjectId'])(_0x5f4b2f))return _0x3f2df5[_0x5718d6(0xfa)]({'status':![],'message':'خطا\x20در\x20ورودی'});if(_0xd44f9b[_0x5718d6(0xf8)]()['trim']()=='')return _0x3f2df5[_0x5718d6(0xfa)]({'status':![],'message':_0x5718d6(0xf2)});if(_0x4f7e5d['toString']()[_0x5718d6(0x110)]()=='')return _0x3f2df5['json']({'status':![],'message':_0x5718d6(0x101)});const _0x79c757={'id':_0x5f4b2f,'fullName':_0xd44f9b,'phoneNumber':_0x4f7e5d};_0x1b2034&&(_0x79c757[_0x5718d6(0x107)]=_0x1b2034);_0x43c706&&(_0x79c757['birthday']=_0x43c706);const _0x5649e3=yield user_entity_1[_0x5718d6(0xe4)][_0x5718d6(0x10f)](new mongoose_1['Types'][(_0x5718d6(0xff))](_0x5f4b2f));if(!_0x5649e3)return _0x3f2df5[_0x5718d6(0xfa)]({'status':![],'message':_0x5718d6(0xf6)});if(yield user_entity_1['default']['checkPhoneNumberWithId'](new mongoose_1['Types']['ObjectId'](_0x5f4b2f),_0x4f7e5d))return _0x3f2df5[_0x5718d6(0xfa)]({'status':![],'message':_0x5718d6(0xe5)});return _0x5649e3[_0x5718d6(0xf1)]!=_0x4f7e5d&&(yield logs_entity_1[_0x5718d6(0xe4)]['changeUserPhoneNumber'](_0x5649e3[_0x5718d6(0xf1)],_0x4f7e5d,_0x5649e3[_0x5718d6(0x111)],_0x328659[_0x5718d6(0x109)]['id'])),yield user_entity_1[_0x5718d6(0xe4)][_0x5718d6(0x103)](new mongoose_1[(_0x5718d6(0xfd))][(_0x5718d6(0xff))](_0x5f4b2f),_0xd44f9b,_0x4f7e5d,_0x43c706,_0x1b2034),_0x3f2df5['json']({'status':!![],'message':_0x5718d6(0xfe)});}catch(_0x5d72af){return console[_0x5718d6(0xfc)]('inside\x20remove\x20user'),console['error'](_0x5d72af),_0x3f2df5[_0x5718d6(0xf3)](0x1f4)[_0x5718d6(0xfa)]({'message':_0x5718d6(0xf7)});}});exports[_0x40c3b1(0xe9)]=editUser;