'use strict';const _0x1e0c8d=_0x1a0d;function _0x4fa3(){const _0x2f2896=['1255093qjbwHq','toString','generateToken','refreshTokenExpireTime','15ppAyqP','36755VCaiRz','value','deleteOne','__importDefault','126743qlGEKs','then','1384644yXltFo','removeAllUserTokens','sign','insertMany','jsonwebtoken','deleteMany','__awaiter','jsonWebTokenSecretKey','__esModule','defineProperty','accessTokenExpireTime','72984IuUmBq','1577976wkfKMN','throw','removeOldToken','default','1231614sFnSTH'];_0x4fa3=function(){return _0x2f2896;};return _0x4fa3();}(function(_0x237810,_0x3ca6e3){const _0x13c0f8=_0x1a0d,_0xa4908e=_0x237810();while(!![]){try{const _0x14c0f4=-parseInt(_0x13c0f8(0x10a))/0x1+parseInt(_0x13c0f8(0xfb))/0x2*(parseInt(_0x13c0f8(0x105))/0x3)+parseInt(_0x13c0f8(0x10c))/0x4+parseInt(_0x13c0f8(0x106))/0x5+-parseInt(_0x13c0f8(0x100))/0x6+parseInt(_0x13c0f8(0x101))/0x7+-parseInt(_0x13c0f8(0xfc))/0x8;if(_0x14c0f4===_0x3ca6e3)break;else _0xa4908e['push'](_0xa4908e['shift']());}catch(_0x27e4dc){_0xa4908e['push'](_0xa4908e['shift']());}}}(_0x4fa3,0x2d69c));function _0x1a0d(_0x36e9d6,_0x335cbf){const _0x4fa309=_0x4fa3();return _0x1a0d=function(_0x1a0d04,_0x1017cd){_0x1a0d04=_0x1a0d04-0xfa;let _0x1a8a9f=_0x4fa309[_0x1a0d04];return _0x1a8a9f;},_0x1a0d(_0x36e9d6,_0x335cbf);}var __awaiter=this&&this[_0x1e0c8d(0x112)]||function(_0x219bcc,_0x4ad662,_0x1205f5,_0x5f1e86){function _0x58c255(_0xcba491){return _0xcba491 instanceof _0x1205f5?_0xcba491:new _0x1205f5(function(_0x2e8b5a){_0x2e8b5a(_0xcba491);});}return new(_0x1205f5||(_0x1205f5=Promise))(function(_0x8c559b,_0x21f3b1){function _0x1bd3dc(_0x3dc211){try{_0x72aed9(_0x5f1e86['next'](_0x3dc211));}catch(_0x393835){_0x21f3b1(_0x393835);}}function _0x44a87e(_0x1fbb72){const _0x5b7c90=_0x1a0d;try{_0x72aed9(_0x5f1e86[_0x5b7c90(0xfd)](_0x1fbb72));}catch(_0xa2928){_0x21f3b1(_0xa2928);}}function _0x72aed9(_0x108a80){const _0x36b480=_0x1a0d;_0x108a80['done']?_0x8c559b(_0x108a80[_0x36b480(0x107)]):_0x58c255(_0x108a80[_0x36b480(0x107)])[_0x36b480(0x10b)](_0x1bd3dc,_0x44a87e);}_0x72aed9((_0x5f1e86=_0x5f1e86['apply'](_0x219bcc,_0x4ad662||[]))['next']());});},__importDefault=this&&this[_0x1e0c8d(0x109)]||function(_0x7eb9ec){const _0x2056db=_0x1e0c8d;return _0x7eb9ec&&_0x7eb9ec[_0x2056db(0x114)]?_0x7eb9ec:{'default':_0x7eb9ec};};Object[_0x1e0c8d(0x115)](exports,'__esModule',{'value':!![]});const constants_1=require('../utility/constants'),tokens_model_1=__importDefault(require('../models/tokens.model')),jsonwebtoken_1=require(_0x1e0c8d(0x110));class TokenEntity{static[_0x1e0c8d(0x103)](_0x16808b){const _0x229e9a=_0x1e0c8d,_0x1d1352=(0x0,jsonwebtoken_1[_0x229e9a(0x10e)])({'id':_0x16808b},constants_1[_0x229e9a(0x113)],{'expiresIn':constants_1[_0x229e9a(0xfa)]}),_0x2bb062=(0x0,jsonwebtoken_1[_0x229e9a(0x10e)])({'id':_0x16808b},constants_1['jsonWebTokenSecretKey'],{'expiresIn':constants_1[_0x229e9a(0x104)]});return{'accessToken':_0x1d1352,'refreshToken':_0x2bb062};}static['createToken'](_0x13c6c5,_0x5bad8e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x201322=_0x1a0d,{accessToken:_0x27e55f,refreshToken:_0x5ba381}=this[_0x201322(0x103)](_0x13c6c5[_0x201322(0x102)]());return yield tokens_model_1[_0x201322(0xff)][_0x201322(0x10f)]({'token':_0x27e55f,'refreshToken':_0x5ba381,'agent':_0x5bad8e,'user':_0x13c6c5}),{'accessToken':_0x27e55f,'refreshToken':_0x5ba381};});}static[_0x1e0c8d(0xfe)](_0x28af31,_0x51266b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3bcc66=_0x1a0d;yield tokens_model_1['default'][_0x3bcc66(0x108)]({'agent':_0x51266b,'user':_0x28af31});});}static[_0x1e0c8d(0x10d)](_0x3823a2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3d8cc9=_0x1a0d;yield tokens_model_1[_0x3d8cc9(0xff)][_0x3d8cc9(0x111)]({'user':_0x3823a2});});}}exports['default']=TokenEntity;