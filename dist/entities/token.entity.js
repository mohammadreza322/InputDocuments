'use strict';const _0x464e4c=_0x547b;(function(_0x5693f6,_0x5968ff){const _0x42a83c=_0x547b,_0x359864=_0x5693f6();while(!![]){try{const _0x5e627b=parseInt(_0x42a83c(0x1f4))/0x1*(parseInt(_0x42a83c(0x200))/0x2)+-parseInt(_0x42a83c(0x205))/0x3+parseInt(_0x42a83c(0x1ff))/0x4*(-parseInt(_0x42a83c(0x209))/0x5)+-parseInt(_0x42a83c(0x206))/0x6+-parseInt(_0x42a83c(0x1f3))/0x7*(-parseInt(_0x42a83c(0x204))/0x8)+parseInt(_0x42a83c(0x20a))/0x9+parseInt(_0x42a83c(0x1f1))/0xa;if(_0x5e627b===_0x5968ff)break;else _0x359864['push'](_0x359864['shift']());}catch(_0x28f5a0){_0x359864['push'](_0x359864['shift']());}}}(_0xb536,0xc265f));var __awaiter=this&&this['__awaiter']||function(_0x173ded,_0x3fc131,_0x3e734f,_0x39d125){function _0x42876c(_0x352a33){return _0x352a33 instanceof _0x3e734f?_0x352a33:new _0x3e734f(function(_0x3879a6){_0x3879a6(_0x352a33);});}return new(_0x3e734f||(_0x3e734f=Promise))(function(_0x336df8,_0xb69553){const _0x18fb02=_0x547b;function _0x4c9bcd(_0x58038f){try{_0x1e3f1f(_0x39d125['next'](_0x58038f));}catch(_0xd081f){_0xb69553(_0xd081f);}}function _0x145ab0(_0x768c4e){const _0xa50d4a=_0x547b;try{_0x1e3f1f(_0x39d125[_0xa50d4a(0x1f8)](_0x768c4e));}catch(_0x56d134){_0xb69553(_0x56d134);}}function _0x1e3f1f(_0x2ade6f){const _0x301a1c=_0x547b;_0x2ade6f[_0x301a1c(0x207)]?_0x336df8(_0x2ade6f[_0x301a1c(0x208)]):_0x42876c(_0x2ade6f[_0x301a1c(0x208)])[_0x301a1c(0x1f7)](_0x4c9bcd,_0x145ab0);}_0x1e3f1f((_0x39d125=_0x39d125[_0x18fb02(0x1fd)](_0x173ded,_0x3fc131||[]))['next']());});},__importDefault=this&&this[_0x464e4c(0x20b)]||function(_0x4222f5){return _0x4222f5&&_0x4222f5['__esModule']?_0x4222f5:{'default':_0x4222f5};};function _0x547b(_0x289811,_0x1d6e2a){const _0xb536e3=_0xb536();return _0x547b=function(_0x547b2a,_0x4f9e1d){_0x547b2a=_0x547b2a-0x1ee;let _0x4eeaaf=_0xb536e3[_0x547b2a];return _0x4eeaaf;},_0x547b(_0x289811,_0x1d6e2a);}Object['defineProperty'](exports,_0x464e4c(0x1fa),{'value':!![]});const constants_1=require(_0x464e4c(0x1ef)),tokens_model_1=__importDefault(require(_0x464e4c(0x1f0))),jsonwebtoken_1=require(_0x464e4c(0x1f2));class TokenEntity{static['generateToken'](_0x390959){const _0x5096e4=_0x464e4c,_0x3fbdbf=(0x0,jsonwebtoken_1[_0x5096e4(0x1f6)])({'id':_0x390959},constants_1[_0x5096e4(0x1fb)],{'expiresIn':constants_1[_0x5096e4(0x1ee)]}),_0x299af0=(0x0,jsonwebtoken_1['sign'])({'id':_0x390959},constants_1['jsonWebTokenSecretKey'],{'expiresIn':constants_1[_0x5096e4(0x203)]});return{'accessToken':_0x3fbdbf,'refreshToken':_0x299af0};}static[_0x464e4c(0x1f5)](_0x24d754,_0x172487){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x28431a=_0x547b,{accessToken:_0x18657b,refreshToken:_0x98e387}=this[_0x28431a(0x1fc)](_0x24d754[_0x28431a(0x1f9)]());return yield tokens_model_1['default']['insertMany']({'token':_0x18657b,'refreshToken':_0x98e387,'agent':_0x172487,'user':_0x24d754}),{'accessToken':_0x18657b,'refreshToken':_0x98e387};});}static['removeOldToken'](_0x3fba17,_0x43f9c1){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x54c0dd=_0x547b;yield tokens_model_1[_0x54c0dd(0x1fe)]['deleteOne']({'agent':_0x43f9c1,'user':_0x3fba17});});}static[_0x464e4c(0x201)](_0xaef120){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5fb695=_0x547b;yield tokens_model_1['default'][_0x5fb695(0x202)]({'user':_0xaef120});});}}exports[_0x464e4c(0x1fe)]=TokenEntity;function _0xb536(){const _0x107698=['3936720eqTGXY','9227118ZKkBQD','done','value','5tzmSbz','12736170MKCCdb','__importDefault','accessTokenExpireTime','../utility/constants','../models/tokens.model','19226800JcFiai','jsonwebtoken','476287loBecB','329879nszOpk','createToken','sign','then','throw','toString','__esModule','jsonWebTokenSecretKey','generateToken','apply','default','3268724WMoQXk','6nOOjxU','removeAllUserTokens','deleteMany','refreshTokenExpireTime','16zrTQRJ'];_0xb536=function(){return _0x107698;};return _0xb536();}